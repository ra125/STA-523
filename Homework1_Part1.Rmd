---
title: "Homework1_Part1"
output: html_document
---

```r
library('stringr')

d <- readLines("~cr173/Sta523/data/world_cup_goals_raw.txt")

id <- str_match_all(d, " id=\"([a-z0-9]*)\"")
pig <- str_match_all(d, " pig=\"([0-9]*)\"")
class <- str_match_all(d, " class=\"([a-z ]*)\"")
pid <- str_match_all(d, " pid=\"([0-9]*)\"")
mid <- str_match_all(d, " mid=\"([0-9]*)\"")
pname <- gsub(".*pname=\"(([^\\x00-\\x7F]|[A-Za-z0-9 ?&;-])*)\".*", "\\1", d, perl=TRUE)
pteam <- gsub(".*pteam=\"(([^\\x00-\\x7F]|[A-Za-z0-9 &;'])*)\".*", "\\1", d, perl=TRUE)
ptime <- str_match_all(d, " ptime=\"([0-9]*)\"")
paddtime <- str_match_all(d, " paddtime=\"([0-9]*)\"")
ptype <- str_match_all(d, " ptype=\"([[a-zA-Z -]*)\"")
right <- gsub("(.*right:[ ]*(([0-9]*)px).*)?(?(1)|.*)", "\\3", d, perl=TRUE)
left <- gsub("(.*left:[ ]*(([0-9]*)px).*)?(?(1)|.*)", "\\3", d, perl=TRUE)
top <- str_match_all(d, "top: ([0-9]*)px")
 
dataset <- matrix(data=NA,nrow=length(d)-1,ncol=14)
dataset <- data.frame(dataset)

index <- seq(1,length(d)-1,1)

dataset[1]<-unlist(id)[2*index]
dataset[2]<-unlist(pig)[2*index]
dataset[3]<-550-as.numeric(unlist(dataset[2]))
dataset[4]<-unlist(class)[2*index]
dataset[5]<-unlist(pid)[2*index]
dataset[6]<-unlist(mid)[2*index]
dataset[7]<-pname[index]
dataset[8]<-pteam[index]
dataset[9]<-unlist(ptime)[2*index]
dataset[10]<-unlist(paddtime)[2*index]
dataset[11]<-unlist(ptype)[2*index]  
dataset[12]<-right[index]
dataset[13]<-left[index]
dataset[14]<-unlist(top)[2*index]

data=cbind(id=dataset[,1], pig=dataset[,2], pig_right=dataset[,3], class=dataset[,4], pid=dataset[,5], mid=dataset[,6], pname=dataset[,7], pteam=dataset[,8], ptime=dataset[,9], paddtime=dataset[,10], ptype=dataset[,11], right=dataset[,12], left=dataset[,13], top=dataset[,14])


```
